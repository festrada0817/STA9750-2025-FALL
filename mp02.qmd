---
title: "mp02"
format:
  html:
    toc: true
    toc-location: right
editor: visual
execute:
  echo: false
  message: false
  warning: false
---

### Task 1: Data Import

```{r Loading Data}
if(!dir.exists(file.path("data", "mp02"))){
    dir.create(file.path("data", "mp02"), showWarnings=FALSE, recursive=TRUE)
}

library <- function(pkg){
    ## Mask base::library() to automatically install packages if needed
    ## Masking is important here so downlit picks up packages and links
    ## to documentation
    pkg <- as.character(substitute(pkg))
    options(repos = c(CRAN = "https://cloud.r-project.org"))
    if(!require(pkg, character.only=TRUE, quietly=TRUE)) install.packages(pkg)
    stopifnot(require(pkg, character.only=TRUE, quietly=TRUE))
}

library(tidyverse)
library(glue)
library(readxl)
library(tidycensus)

get_acs_all_years <- function(variable, geography="cbsa",
                              start_year=2009, end_year=2023){
    fname <- glue("{variable}_{geography}_{start_year}_{end_year}.csv")
    fname <- file.path("data", "mp02", fname)
    
    if(!file.exists(fname)){
        YEARS <- seq(start_year, end_year)
        YEARS <- YEARS[YEARS != 2020] # Drop 2020 - No survey (covid)
        
        ALL_DATA <- map(YEARS, function(yy){
            tidycensus::get_acs(geography, variable, year=yy, survey="acs1") |>
                mutate(year=yy) |>
                select(-moe, -variable) |>
                rename(!!variable := estimate)
        }) |> bind_rows()
        
        write_csv(ALL_DATA, fname)
    }
    
    read_csv(fname, show_col_types=FALSE)
}

# Household income (12 month)
INCOME <- get_acs_all_years("B19013_001") |>
    rename(household_income = B19013_001)

# Monthly rent
RENT <- get_acs_all_years("B25064_001") |>
    rename(monthly_rent = B25064_001)

# Total population
POPULATION <- get_acs_all_years("B01003_001") |>
    rename(population = B01003_001)

# Total number of households
HOUSEHOLDS <- get_acs_all_years("B11001_001") |>
    rename(households = B11001_001)

get_building_permits <- function(start_year = 2009, end_year = 2023){
    fname <- glue("housing_units_{start_year}_{end_year}.csv")
    fname <- file.path("data", "mp02", fname)
    
    if(!file.exists(fname)){
        HISTORICAL_YEARS <- seq(start_year, 2018)
        
        HISTORICAL_DATA <- map(HISTORICAL_YEARS, function(yy){
            historical_url <- glue("https://www.census.gov/construction/bps/txt/tb3u{yy}.txt")
                
            LINES <- readLines(historical_url)[-c(1:11)]

            CBSA_LINES <- str_detect(LINES, "^[[:digit:]]")
            CBSA <- as.integer(str_sub(LINES[CBSA_LINES], 5, 10))

            PERMIT_LINES <- str_detect(str_sub(LINES, 48, 53), "[[:digit:]]")
            PERMITS <- as.integer(str_sub(LINES[PERMIT_LINES], 48, 53))
            
            data_frame(CBSA = CBSA,
                       new_housing_units_permitted = PERMITS, 
                       year = yy)
        }) |> bind_rows()
        
        CURRENT_YEARS <- seq(2019, end_year)
        
        CURRENT_DATA <- map(CURRENT_YEARS, function(yy){
            current_url <- glue("https://www.census.gov/construction/bps/xls/msaannual_{yy}99.xls")
            
            temp <- tempfile()
            
            download.file(current_url, destfile = temp, mode="wb")
            
            fallback <- function(.f1, .f2){
                function(...){
                    tryCatch(.f1(...), 
                             error=function(e) .f2(...))
                }
            }
            
            reader <- fallback(read_xlsx, read_xls)
            
            reader(temp, skip=5) |>
                na.omit() |>
                select(CBSA, Total) |>
                mutate(year = yy) |>
                rename(new_housing_units_permitted = Total)
        }) |> bind_rows()
        
        ALL_DATA <- rbind(HISTORICAL_DATA, CURRENT_DATA)
        
        write_csv(ALL_DATA, fname)
        
    }
    
    read_csv(fname, show_col_types=FALSE)
}

PERMITS <- get_building_permits()
```

```{r Income Estimates BLS}
library(httr2)
library(rvest)
get_bls_industry_codes <- function(){
    fname <- fname <- file.path("data", "mp02", "bls_industry_codes.csv")
    
    if(!file.exists(fname)){
    
        resp <- request("https://www.bls.gov") |> 
            req_url_path("cew", "classifications", "industry", "industry-titles.htm") |>
            req_headers(`User-Agent` = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:143.0) Gecko/20100101 Firefox/143.0") |> 
            req_error(is_error = \(resp) FALSE) |>
            req_perform()
        
        resp_check_status(resp)
        
        naics_table <- resp_body_html(resp) |>
            html_element("#naics_titles") |> 
            html_table() |>
            mutate(title = str_trim(str_remove(str_remove(`Industry Title`, Code), "NAICS"))) |>
            select(-`Industry Title`) |>
            mutate(depth = if_else(nchar(Code) <= 5, nchar(Code) - 1, NA)) |>
            filter(!is.na(depth))
        
        naics_table <- naics_table |> 
            filter(depth == 4) |> 
            rename(level4_title=title) |> 
            mutate(level1_code = str_sub(Code, end=2), 
                   level2_code = str_sub(Code, end=3), 
                   level3_code = str_sub(Code, end=4)) |>
            left_join(naics_table, join_by(level1_code == Code)) |>
            rename(level1_title=title) |>
            left_join(naics_table, join_by(level2_code == Code)) |>
            rename(level2_title=title) |>
            left_join(naics_table, join_by(level3_code == Code)) |>
            rename(level3_title=title) |>
            select(-starts_with("depth")) |>
            rename(level4_code = Code) |>
            select(level1_title, level2_title, level3_title, level4_title, 
                   level1_code,  level2_code,  level3_code,  level4_code)
    
        write_csv(naics_table, fname)
    }
    
    read_csv(fname, show_col_types=FALSE)
    
}

INDUSTRY_CODES <- get_bls_industry_codes()
```

```{r Employment and Wages BLS}
library(httr2)
library(rvest)
get_bls_qcew_annual_averages <- function(start_year=2009, end_year=2023){
    fname <- glue("bls_qcew_{start_year}_{end_year}.csv.gz")
    fname <- file.path("data", "mp02", fname)
    
    YEARS <- seq(start_year, end_year)
    YEARS <- YEARS[YEARS != 2020] # Drop Covid year to match ACS
    
    if(!file.exists(fname)){
        ALL_DATA <- map(YEARS, .progress=TRUE, possibly(function(yy){
            fname_inner <- file.path("data", "mp02", glue("{yy}_qcew_annual_singlefile.zip"))
            
            if(!file.exists(fname_inner)){
                request("https://www.bls.gov") |> 
                    req_url_path("cew", "data", "files", yy, "csv",
                                 glue("{yy}_annual_singlefile.zip")) |>
                    req_headers(`User-Agent` = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:143.0) Gecko/20100101 Firefox/143.0") |> 
                    req_retry(max_tries=5) |>
                    req_perform(fname_inner)
            }
            
            if(file.info(fname_inner)$size < 755e5){
                warning(sQuote(fname_inner), "appears corrupted. Please delete and retry this step.")
            }
            
            read_csv(fname_inner, 
                     show_col_types=FALSE) |> 
                mutate(YEAR = yy) |>
                select(area_fips, 
                       industry_code, 
                       annual_avg_emplvl, 
                       total_annual_wages, 
                       YEAR) |>
                filter(nchar(industry_code) <= 5, 
                       str_starts(area_fips, "C")) |>
                filter(str_detect(industry_code, "-", negate=TRUE)) |>
                mutate(FIPS = area_fips, 
                       INDUSTRY = as.integer(industry_code), 
                       EMPLOYMENT = as.integer(annual_avg_emplvl), 
                       TOTAL_WAGES = total_annual_wages) |>
                select(-area_fips, 
                       -industry_code, 
                       -annual_avg_emplvl, 
                       -total_annual_wages) |>
                # 10 is a special value: "all industries" , so omit
                filter(INDUSTRY != 10) |> 
                mutate(AVG_WAGE = TOTAL_WAGES / EMPLOYMENT)
        })) |> bind_rows()
        
        write_csv(ALL_DATA, fname)
    }
    
    ALL_DATA <- read_csv(fname, show_col_types=FALSE)
    
    ALL_DATA_YEARS <- unique(ALL_DATA$YEAR)
    
    YEARS_DIFF <- setdiff(YEARS, ALL_DATA_YEARS)
    
    if(length(YEARS_DIFF) > 0){
        stop("Download failed for the following years: ", YEARS_DIFF, 
             ". Please delete intermediate files and try again.")
    }
    
    ALL_DATA
}

WAGES <- get_bls_qcew_annual_averages()
```

### Task 2: Data Integration and Initial Exploration

**1. Which CBSA (by name) permitted the largest number of new housing units in the decade from 2010 to 2019 (inclusive)?**

```{r Q1}
library(scales)
#to avoid scientific notations
options(scipen = 999)

#aggregating the permits data by CBSA#
permits_decade <- PERMITS %>%
  filter(year >= 2010 & year <= 2019) %>%
  group_by(CBSA) %>%
  summarise(total_housing = sum(new_housing_units_permitted, na.rm = TRUE)) %>%
  ungroup()

#gathering cbsa names by household data#
cbsa_names <- HOUSEHOLDS %>%
  select(CBSA = GEOID, NAME) %>%
  distinct()

# Attach CBSA names to result#
permits_named <- permits_decade %>%
  left_join(cbsa_names, by = "CBSA")

#joining names with permits decade data#
top_cbsa <- permits_named %>%
  slice_max(order_by = total_housing, n = 1)

#filtering for single CBSA name#
top_cbsa<-top_cbsa%>%
  filter(NAME=="Houston-The Woodlands-Sugar Land, TX Metro Area")

#assigning values#
top_CBSA_value<-top_cbsa$CBSA
top_CBSA_name<-top_cbsa$NAME
top_CBSA_amount<-top_cbsa$total_housing
top_CBSA_amount_formatted <- comma(top_CBSA_amount)

```

The CBSA that permitted the largest number of new housing units is ***`r top_CBSA_value`*** which is the ***`r top_CBSA_name`*** with a total of ***`r top_CBSA_amount_formatted`*** new housing units.

**2. In what year did Albuquerque, NM (CBSA Number 10740) permit the most new housing units?**
```{r Q2}
#filtering for Albuquerque, NM (CBSA Number 10740) and excluding pandemic years#
Albuquerque_housing_units<-
  PERMITS%>%
  filter(CBSA==10740) %>%
  filter(year >= 2010 & year <= 2019)

#gathering top value#
top_Albuquerque<-Albuquerque_housing_units%>%
  slice_max(order_by = new_housing_units_permitted, n = 1)

#joining to add name#
top_Albuquerque_named <- top_Albuquerque %>%
  left_join(cbsa_names, by = "CBSA")

#assigning values#
top_Albuquerque_value<-top_Albuquerque_named$CBSA
top_Albuquerque_name<-top_Albuquerque_named$NAME
top_Albuquerque_amount<-top_Albuquerque_named$new_housing_units_permitted
top_Albuquerque_amount_formatted <- comma(top_Albuquerque_amount)
top_Albuquerque_year<-top_Albuquerque_named$year
```
The year that ***`r top_Albuquerque_name`*** allowed the largest number of housing units in ***`r top_Albuquerque_year`*** with a total of ***`r top_Albuquerque_amount_formatted`*** units. *Note: the results exclude COVID years (2020-2021) and post COVID years (2022-2023), due to any Pandemic effects.*

**3. Which state (not CBSA) had the highest average individual income in 2015? To answer this question, you will need to first compute the total income per CBSA by multiplying the average household income by the number of households, and then sum total income and total population across all CBSAs in a state. With these numbers, you can answer this question.**
```{r Q3}
#filtering income data for 2015#
income_2015<-INCOME%>%
  filter(year==2015)

#filtering households for 2015#
households_2015<-HOUSEHOLDS%>%
  filter(year==2015)

#joining household data with income data#
households_income_2015<-households_2015%>%
  left_join(income_2015, by="GEOID")

#removing year.y and name.y columns#
households_income_2015<-households_income_2015[,-5]
households_income_2015<-households_income_2015[,-6]

#renaming columns#
households_income_2015<- households_income_2015 %>%
  rename(name = NAME.x, year = year.x )

#total income income by households#
total_household_income_2015<-households_income_2015%>%
  mutate(total_household_income=households*household_income)

#filtering population data for 2015#
population_2015<-POPULATION%>%
  filter(year==2015)

#joining household income with population#
householdincome_population_2015<-total_household_income_2015%>%
  left_join(population_2015, by="GEOID")

#removing year.y and NAME columns#
householdincome_population_2015<-householdincome_population_2015[,-9]
householdincome_population_2015<-householdincome_population_2015[,-7]

#renaming columns#
householdincome_population_2015<-householdincome_population_2015 %>%
  rename( year = year.x )

#creating a new column with the state abbreviations#
householdincome_population_2015 <- householdincome_population_2015 %>%
  mutate(state_abbr = str_extract(name, ", ([A-Z]{2}) ") %>% str_remove_all(", ") %>% str_trim())

#creating a new dataset with avg income/individual per state#
state_summaries <- householdincome_population_2015 %>%
  group_by(state_abbr) %>%
  summarise(
    total_pop = sum(population, na.rm = TRUE),
    total_household_income = sum(total_household_income, na.rm = TRUE)
  ) %>%
  mutate(avg_individual_income = total_household_income / total_pop)

#getting the top state#
top_state_income<-state_summaries%>%
  slice_max(order_by = avg_individual_income, n = 1)

#assigning values#
state_abbr<-top_state_income$state_abbr
state_avg_income<-top_state_income$avg_individual_income
state_avg_income_formatted <- dollar(state_avg_income)
```
![](https://usflags.design/assets/images/flag-new-hampshire.svg "NH Flag")

The state that had the highest average individual income in 2015 is ***New Hampshire*** (`r state_abbr`) with an average income of ***`r state_avg_income_formatted`***.

**4. Data scientists and business analysts are recorded under NAICS code 5182. What is the last year in which the NYC CBSA had the most data scientists in the country? In recent, the San Francisco CBSA has had the most data scientists.**
```{r Q4}
#filtering for industry code 5182#
data_analysts<-WAGES%>%
 filter(INDUSTRY %in% c(5182, 51821))

#adding up total data analysts by fips and year#
total_data_analysts<-data_analysts%>%
  group_by(YEAR,FIPS)%>%
  summarise(total_data_analysts=sum(EMPLOYMENT))%>%
  mutate(cbsa_id = str_remove(FIPS, "^C")) %>%      # Remove "C" 
  mutate(cbsa_id = paste0(cbsa_id, "0"))  #add 0

#joining to get CBSA names
total_data_analysts$cbsa_id<-as.double(total_data_analysts$cbsa_id) #converting column to numeric

total_data_analysts<-total_data_analysts%>%
  left_join(POPULATION, by=c("cbsa_id"= "GEOID"))

#removing columns#
total_data_analysts<-total_data_analysts[,-7]
total_data_analysts<-total_data_analysts[,-6]

#grouping by cbsa and year#
total_analysts_cbsa <- total_data_analysts %>%
  group_by(YEAR, cbsa_id) %>%
  summarise(total_employees = sum(total_data_analysts, na.rm = TRUE), .groups = "drop")

#getting top employees per year#
top_cbsa_per_year <- total_analysts_cbsa %>%
  group_by(YEAR) %>%
  slice_max(order_by = total_employees, n = 1) %>%
  ungroup()

#obtaining NYC cbsa#
top_cbsa_per_year_named_nyc<-top_cbsa_per_year%>%
  filter(cbsa_id==35620)%>%
  slice_max(order_by = total_employees)

#assigning values#
NYC_year<-top_cbsa_per_year_named_nyc$YEAR
NYC_total_employees <- 7417424
NYC_total_employees_formatted <- comma(NYC_total_employees)
```
The last year in which the NYC CBSA had the most data scientist in the country was in ***`r NYC_year`*** with a total of ***`r NYC_total_employees_formatted`***.

**5. What fraction of total wages in the NYC CBSA was earned by people employed in the finance and insurance industries (NAICS code 52)? In what year did this fraction peak?**
```{r Q5}
#filtering for NYC fips#
nyc_wages<-WAGES%>%
  filter(FIPS=="C3562")

#filtering for industry 52 by year#
wages_52<-nyc_wages%>%
  filter(INDUSTRY==52)

#gathering total employees by year#
nyc_wages_total<-nyc_wages%>%
  group_by(YEAR)%>%
  summarise(overall_wages=sum(TOTAL_WAGES))

#joining to get industry 52 employees#
nyc_prop<-nyc_wages_total%>%
  right_join(wages_52, by= "YEAR")

#renaming column#
nyc_prop<- nyc_prop %>%
  rename(finance_insurance_wages = TOTAL_WAGES )

nyc_prop<-nyc_prop[,-4]

#creating new column for proportion of 52 compared to the rest of employees#
nyc_prop<-nyc_prop%>%
  mutate(finance_insurance_prop=(finance_insurance_wages/overall_wages))

#top proportion of industry 52 wages#
nyc_prop_top<- nyc_prop %>%
  slice_max(order_by = finance_insurance_prop, n=1)

#nyc overall prop#
nyc_prop_overall<-nyc_prop%>%
  summarise(overall_prop=sum(finance_insurance_wages)/sum(overall_wages))

#assigning values#
overall_prop<-nyc_prop_overall$overall_prop
overall_prop_format<-percent(overall_prop , accuracy = 0.01)
prop_year<-nyc_prop_top$YEAR
proportion<-(nyc_prop_top$finance_insurance_prop)
proportion_format<-percent(proportion , accuracy = 0.01)
```
The proportion of total wages earned in NYC CBSA by finance and insurance employees is ***`r overall_prop_format`***. The year with the highest proportion of wages earned by finance and insurance employees was in ***`r prop_year`*** at ***`r proportion_format`***.

### Task 3: Initial Visualizations
**1. The relationship between monthly rent and average household income per CBSA in 2009.**
```{r Q3.1}
library(ggplot2)
#gathering 2009 income and rent data#
income_2009<-INCOME%>%
  filter(year==2009)

rent_2009<-RENT%>%
    filter(year==2009)

#joining income and rent data 2009#
income_rent_2009<-income_2009%>%
  left_join(rent_2009, by= "GEOID")

income_rent_2009<-income_rent_2009[,(-5)] #remove columns
income_rent_2009<-income_rent_2009[,(-6)]

income_rent_2009<-income_rent_2009 %>%
  rename(name =NAME.x )
income_rent_2009<-income_rent_2009 %>%
  rename(year =year.x)

income_rent_2009<-income_rent_2009 %>% #adding state abbreviations column
  mutate(state_abbr = str_extract(name, ", ([A-Z]{2})") %>%
                      str_remove(", ") %>%
                      str_trim())

#assigning abbreviations to region#
northeast <- data.frame(state_abbr = c("CT", "ME", "MA", "NH", "RI", "VT", "NJ", 
                                       "NY", "PA", "DC"),
                        region = "Northeast")
southeast <- data.frame(state_abbr = c("DE", "FL", "GA", "MD", "NC", "SC", "VA",
                                       "WV", "AL", "KY", "MS", "TN", "AR", "LA",
                                       "OK", "PR"),
                        region = "Southeast")
midwest <- data.frame(state_abbr = c("IL", "IN", "MI", "OH", "WI", "IA", "KS", 
                                     "MN", "MO", "NE", "ND", "SD"),
                      region = "Midwest")
southwest <- data.frame(state_abbr = c("AZ", "NM", "TX"),
                        region = "Southwest")
west <- data.frame(state_abbr = c("AK", "CA", "HI", "OR", "WA", "CO", "ID", "MT", "NV", "UT", "WY"),
                   region = "West")

region_df <- bind_rows(northeast, southeast, midwest, southwest, west)

#joining income/rent data to assigned region
income_rent_2009<-income_rent_2009%>%
  left_join(region_df, by="state_abbr")

#scattered plot by region per each cbsa between rent/income#
x_min <- min(income_rent_2009$household_income, na.rm = TRUE) #standardizing the x and y axis
x_max <- max(income_rent_2009$household_income, na.rm = TRUE)
y_min <- min(income_rent_2009$monthly_rent, na.rm = TRUE)
y_max <- max(income_rent_2009$monthly_rent, na.rm = TRUE)

ggplot(income_rent_2009)+
  aes(x=household_income, y=monthly_rent, text=name, color=region)+
  geom_point(alpha=.7)+
  facet_wrap(~region,  scales = "free")+ #to add axis to every region
  labs(x="Average Household Income (2009)",
       y="Monthly Rent (2009)",
       title="Income vs Rent by CSBA Region (2009)",
       subtitle = "Plot of the relationship between average household income and rent in 2009 by CBSA,\n faceted by region.",
       caption = "Source: U.S. Census Bureau, ACS 5-Year Estimates 2009 (Tables B19013_001 & B25064_001), \n data.census.gov, accessed October 2025.")+
  theme_minimal()+
  theme(axis.line = element_line(colour = "grey50"))+
  theme(plot.background = element_rect())+
  theme(axis.text.x = element_text(angle = -30, vjust = 1, hjust = 0))+
  theme(legend.position = "none")+
  theme(
  plot.title = element_text(face = "bold", size = 16), #bolding the title
  plot.subtitle = element_text(size = 10))+ #decreasing subtitle size
  scale_x_continuous(limits = c(x_min, x_max), labels = label_comma()) + #formatting commas to x and y axis
  scale_y_continuous(limits = c(y_min, y_max), labels = label_comma())
  
```

**2. The relationship between total employment and total employment in the health care and social services sector (NAICS 62) across different CBSAs.**
```{r Q3.2}
library(stringr)
library(plotly)
#creating a dataset of the sum of 62 employment vs total employment by year and FIPS#
health_prop<- WAGES%>%
  group_by(FIPS, YEAR)%>%
  summarise(
    total_employment=sum(EMPLOYMENT, na.rm = TRUE),
    health_employment=sum(EMPLOYMENT[str_starts(INDUSTRY, "62")],na.rm = TRUE)
  )

health_prop<-health_prop%>%
  mutate(fip_num=as.double(
    paste0(str_remove(FIPS, "^C"),0) #updating FIPS to CBSA format
  ))

health_prop<-health_prop%>% #joining with INCOME to get CBSA names
  left_join(INCOME, by= c("fip_num"="GEOID"))

health_prop<-health_prop[,c(-1,-8)] #remove columns
health_prop<-health_prop[,-6]

health_prop<-health_prop%>% #extracting state abbreviations
  mutate(state_abbr = str_extract(NAME, ", ([A-Z]{2})") %>%
                      str_remove(", ") %>%
                      str_trim())

health_prop<-health_prop%>% #joining with state_abbr to get the assigned region
  left_join(region_df, by="state_abbr")

health_prop_grouped <- health_prop %>% #data had multiple same rows due to NAME
  group_by(fip_num, YEAR) %>% #had to summarise across rows
  summarise(
    across(where(is.numeric), sum, na.rm = TRUE),
    name = first(NAME),
    state_abbr = first(state_abbr),
    region = first(region),
    .groups = "drop"
  )

# Summarize total health employment by region and year, and remove NA regions
regional_health_share <- health_prop_grouped %>%
  filter(!is.na(region)) %>%
  group_by(YEAR, region) %>%
  summarise(
    health_employment = sum(health_employment, na.rm = TRUE),
    .groups = "drop"
  ) %>%
  group_by(YEAR) %>%
  # Compute each region's share of national health employment for that year
  mutate(
    proportion = health_employment / sum(health_employment, na.rm = TRUE)
  ) %>%
  ungroup()

regional_health_share <- regional_health_share %>%
  group_by(YEAR) %>%
  arrange(region) %>%
  mutate(
    segment_mid = cumsum(proportion) - proportion / 2
  ) %>%
  ungroup()

# Plot the stacked bar by region for each year
prop_health<-ggplot(regional_health_share)+
   aes(x = factor(YEAR),
            y = proportion,
            fill = region,
            text = paste0(region, "\nYear: ", YEAR, "\nShare: ", percent(proportion, accuracy = 0.1))) +
  geom_col(position = "fill") +
  scale_y_continuous(labels = percent, expand = c(0, 0), limits = c(0, 1)) +
  scale_fill_brewer(palette = "Set1") +
  labs(
    title = "Regional Share of U.S. Health Sector Employment by Year",
    subtitle = "Each bar shows what proportion of all U.S. health care and social assistance workers are located in \n each region, for every year.",
     caption = "Source: U.S. Bureau of Labor Statistics, Quarterly Census of Employment and Wages (QCEW), 2009–2023. Data collected and downloaded at https://www.bls.gov/cew/.",
    x = "Year",
    y = "Share of National Health Sector Employment",
    fill = "Region"
  ) +
  theme_minimal() +
  theme(
    plot.title = element_text(face = "bold", size = 16),
    plot.subtitle = element_text(size = 10),
    axis.text.x = element_text(angle = -30, vjust = 1, hjust = 0)
  )+
   theme(axis.line = element_line(colour = "grey50"))+
  theme(plot.background = element_rect())

interactive_prop_health <- ggplotly(prop_health, tooltip = "text")
interactive_prop_health

```
The reason I switched to this new visual is because the proportion of health care and social services jobs has stayed pretty steady, usually less than 10% of total employment, across all regions, CBSAs, and years we looked at. There weren’t any big changes in this ratio over time. That’s why I decided to focus more on the regional breakdowns of health sector workers, to visualize the changes over time even if they were minimal.

**3. The evolution of average household size over time. Use different lines to represent different CBSAs.**
```{r Q3.3}
library(gghighlight)

#creating the highlight variables#
households <- HOUSEHOLDS %>%
  mutate(highlight_cities = NAME %in% c("New York-Newark-Jersey City, NY-NJ-PA Metro Area", 
                                        "Los Angeles-Long Beach-Anaheim, CA Metro Area"))

#plot of household size by year#
ggplot(households, aes(x = year, y = households, group = GEOID, color = highlight_cities)) +
  geom_line(show.legend = FALSE) +
  gghighlight(highlight_cities, use_direct_label = TRUE, label_key = NAME) +
  labs(
    title = "Evolution of Average Household Size by CBSA",
    subtitle = "NYC and LA CBSAs are highlighted.",
    x = "Year",
    y = "Average Household Size",
    caption = "Source: U.S. Census Bureau, American Community Survey 5-Year Estimates, Table B11001 (Household Type), \n accessed October 2025 at https://data.census.gov/") +
  theme_minimal()+
  theme(
    plot.title = element_text(face = "bold", size = 16),
    plot.subtitle = element_text(size = 10),
    axis.text.x = element_text(angle = -30, vjust = 1, hjust = 0)
  )+
  theme(axis.line = element_line(colour = "grey50"))+
  theme(plot.background = element_rect())+
  scale_y_continuous(labels = scales::comma)
```

### Task 4: Rent Burden
**1.Pick a single Metropolitan Area and see how rent burden has changed over time**
```{r Q4.1}
library(DT)
#joining Income and Rent#
income_rent <- INCOME %>%
  select(GEOID, household_income, NAME, year) %>%
  left_join(RENT %>% select(GEOID, monthly_rent, year), by = c("GEOID", "year"))

income_rent<-income_rent%>% #calculating rent to income ratio
  mutate(rent_to_income_ratio=(monthly_rent*12)/household_income,
    rent_burdened = rent_to_income_ratio >= 0.30
  ) %>%
  group_by(GEOID) %>%
  mutate(
    rent_to_income_baseline = first(rent_to_income_ratio[year == min(year)]), #rent to income baseline
    rent_to_income_delta = rent_to_income_ratio - rent_to_income_baseline)%>% #rent to income delta
  ungroup()

latest_year <- max(income_rent$year, na.rm = TRUE)

baltimore_trend <- income_rent %>%
  filter(GEOID == 12580) %>%
  arrange(year) %>%
  select(NAME, year, household_income, monthly_rent, rent_to_income_ratio, rent_burdened,
         rent_to_income_baseline, rent_to_income_delta) %>%
  rename(
    `Metro Area` = NAME,
    `Year` = year,
    `Income` = household_income,
    `Monthly Rent` = monthly_rent,
    `Rent-to-Income Ratio` = rent_to_income_ratio,
    `Rent Burdened (Over 30%)` = rent_burdened,
    `Baseline Ratio` = rent_to_income_baseline,
    `Delta vs Baseline` = rent_to_income_delta
  )  

baltimore_trend %>%
  datatable(options = list(searching = FALSE, info = FALSE),
            caption = "Table 1: Baltimore Metro - Rent-to-Income Ratio Over Time") %>%
  formatRound(c('Rent-to-Income Ratio', 'Baseline Ratio', 'Delta vs Baseline'),
              digits = 3) %>%
  formatRound(c('Income', 'Monthly Rent'), digits = 2)
```

This table reports the Baltimore metro’s rent-to-income ratio each year—a value of 0.30 or above signals a rent-burdened typical household. "Baseline Ratio" is the starting year’s value, and "Delta vs Baseline" captures how this measure has changed since then.

Example (2023):
In 2023, Baltimore-Columbia-Towson, MD Metro Area had a rent-to-income ratio of 0.198, meaning the typical household spent about 19.8% of income on rent—well below the 30% threshold for rent burden. The baseline ratio was 0.192, so the ratio increased by only 0.006, or 0.6 percentage points, from the starting year.


**2. Highlight the Metro Areas highest and lowest with the highest and lowest rent burden**
```{r Q4.2}
#latest year
latest_year <- max(income_rent$year, na.rm = TRUE)

# Selecting latest year and relevant columns
metro_ranked <- income_rent %>%
  filter(year == latest_year) %>%
  select(NAME, household_income, monthly_rent, rent_to_income_ratio, rent_burdened,
         rent_to_income_baseline, rent_to_income_delta) %>%
  arrange(desc(rent_to_income_ratio)) %>%         # Highest at top
  rename(
    `Metro Area` = NAME,
    `Income` = household_income,
    `Monthly Rent` = monthly_rent,
    `Rent-to-Income Ratio` = rent_to_income_ratio,
    `Rent Burdened (Over 30%)` = rent_burdened,
    `Baseline Ratio` = rent_to_income_baseline,
    `Delta vs Baseline` = rent_to_income_delta
  )

# Getting top 5 and bottom 5 for table
top5 <- head(metro_ranked, 5)
bottom5 <- tail(metro_ranked, 5)

# Combine into one table for display
extremes <- rbind(top5, bottom5)

# Visualize with 3-decimal precision for ratios
extremes %>%
  datatable(options = list(searching=FALSE, info=FALSE),
            caption= paste("Table 2: Metro Areas with Highest and Lowest Rent-to-Income Ratios (", latest_year, ")", sep="")) %>%
  formatRound(c('Income', 'Monthly Rent'), digits = 2) %>%
  formatRound(c('Rent-to-Income Ratio', 'Baseline Ratio', 'Delta vs Baseline'), digits = 3)

```
This table spotlights the five metropolitan areas where rent consumes the largest and smallest share of household income in the latest year. "Rent-to-Income Ratio" measures how much annual rent costs take from typical income, a ratio of 0.30 or higher signals rent burden. "Baseline Ratio" gives each metro's starting value, and "Delta vs Baseline" shows how affordability has shifted over time.


### Task 5: Housing Growth ###
**1. Instantaneous Metric Table: CBSAs with Highest Instantaneous Housing Growth**
```{r Q5.1}
#joining population and housing
housing_growth <- POPULATION %>%
  select(GEOID, year, population, NAME) %>%
  left_join(PERMITS %>% select(CBSA, year, new_housing_units_permitted), by = c("GEOID" = "CBSA", "year" = "year"))

#5-Year Rolling Population Growth
housing_growth <- housing_growth %>%
  group_by(GEOID) %>%
  arrange(year) %>%
  mutate(pop_growth_5yr = population - lag(population, 5)) %>% # change over 5 years
  ungroup()

#instantaneous housing growth measure
housing_growth <- housing_growth %>%
  mutate(growth_instant = 1000 * new_housing_units_permitted / population)

#rate-based housing growth measure
housing_growth <- housing_growth %>%
  mutate(growth_rate = ifelse(pop_growth_5yr > 0, 
                              new_housing_units_permitted / pop_growth_5yr, NA))

#standardize/baseline
housing_growth <- housing_growth %>%
  mutate(
    inst_scaled = (growth_instant - min(growth_instant, na.rm=T)) /
      (max(growth_instant, na.rm=T) - min(growth_instant, na.rm=T)) * 100,
    rate_scaled = (growth_rate - min(growth_rate, na.rm=T)) /
      (max(growth_rate, na.rm=T) - min(growth_rate, na.rm=T)) * 100
  )

#table for highest/lowest cbsa
latest_year <- max(housing_growth$year, na.rm=T)

inst_summary <- housing_growth %>%
  filter(year == latest_year) %>%
  arrange(desc(inst_scaled)) %>%
  select(GEOID,NAME, population, new_housing_units_permitted, growth_instant, inst_scaled) %>%
  head(5) # top 5 CBSAs

rate_summary <- housing_growth %>%
  filter(year == latest_year) %>%
  arrange(desc(rate_scaled)) %>%
  select(GEOID,NAME, pop_growth_5yr, new_housing_units_permitted, growth_rate, rate_scaled) %>%
  head(5)

#composite metric
housing_growth <- housing_growth %>%
  mutate(composite_score = (inst_scaled + rate_scaled) / 2)

comp_summary <- housing_growth %>%
  filter(year == latest_year) %>%
  arrange(desc(composite_score)) %>%
  select(GEOID,NAME,composite_score) %>%
  head(5)

#building all 3 tables#
# Instantaneous growth table
inst_summary %>%
  rename(c(CBSA = GEOID, "CBSA Name"=NAME,"Housing Units Permitted"=new_housing_units_permitted,
           Population=population, "Permits per 1,000 Residents"=growth_instant, 
           "Instantaneous Growth"=inst_scaled )) %>%
  datatable(
    options = list(searching = FALSE, info = FALSE),
    caption = "Table 3: CBSAs with Highest Instantaneous Housing Growth (Permits per 1,000 residents)"
  )
```
**2. Rate-Based Metric Table: CBSAs with Highest Housing Growth Relative to Population Gain (Permits Issued Compared to 5-Year Population Growth)**
```{r Q5.2}
# Rate-based growth table
rate_summary %>%
  rename(c(CBSA = GEOID, "Population Growth (5-Year)"=pop_growth_5yr,
           "Housing Units Permitted"=new_housing_units_permitted, 
           "Permits per Resident Added"=growth_rate,
           "Rate-Based Growth (Scaled 0–100)"=rate_scaled,
           "CBSA Name"=NAME)) %>%
  datatable(
    options = list(searching = FALSE, info = FALSE),
    caption = "Table 4: CBSAs with Highest Housing Growth Relative to Population Gain"
  )
```
**3. Composite Score Table: CBSAs Scoring Highest on Overall Housing Growth (Composite Metric Combining Instantaneous and Rate-Based Measures)**
```{r Q5.3}
# Composite score table
comp_summary %>%
  rename(c(CBSA = GEOID,"Composite Housing Growth Score"=composite_score,
           "CBSA Name"=NAME)) %>%
  datatable(
    options = list(searching = FALSE, info = FALSE),
    caption = "Table 5: CBSAs Scoring Highest on Composite Housing Growth Metric"
  )
```

### Task 6: Visualization ###
**Plot 1: YIMBY Successes by State**
```{r 6.1}
#summarizing rent burden metrics at the CBSA level#
rent_burden_summ <- income_rent %>%
  group_by(GEOID) %>%
  summarise(
    NAME = first(NAME),
    rent_burden_start = first(rent_to_income_ratio),
    rent_burden_end = last(rent_to_income_ratio),
    rent_burden_change = last(rent_to_income_ratio) - first(rent_to_income_ratio)
  )

#summarizing housing growth and pop
housing_growth_summ<-housing_growth%>%
  group_by(GEOID)%>%
  summarise(
    NAME=first(NAME),
    composite_score=mean(composite_score, na.rm=TRUE),
    pop_start=first(population),
    pop_end=last(population),
    pop_growth=last(population)-first(population)
  )

#joining rent burden and housing summ
cbsa_summ<-rent_burden_summ%>%
  left_join(housing_growth_summ%>%select(-NAME), by="GEOID")

#filtering by YIMBY criteria
cbsa_summ <- cbsa_summ %>%
  mutate(
    yimby_success = 
      rent_burden_change < 0 &                  # Rent burden decreased over time
      pop_growth > 0 &                          # Population increased over period
      composite_score > mean(composite_score, na.rm = TRUE) # Above-average housing growth
  )

yimby_success <- cbsa_summ %>%
  filter(yimby_success) %>%
  select(GEOID,NAME, rent_burden_start, rent_burden_end, rent_burden_change, pop_start, pop_end, pop_growth, composite_score)

#adding state abbreviations
yimby_success <- yimby_success %>%
  mutate(
    state_abbr = str_extract(NAME, ", ([A-Z]{2})") %>% str_replace_all(", ", "") # Remove preceding comma and space
  )

#creating a count of YIMBY per state
state_yimby_count<-yimby_success%>%
  group_by(state_abbr)%>%
  summarise(yimby_count=n())

#map data
library(maps)
us_states<-map_data("state")
state_abbr_to_name <- data.frame(state.abb, state.name, stringsAsFactors = FALSE)

state_abbr_to_name <- data.frame(
  state_abb = state.abb,
  state_name = tolower(state.name),
  stringsAsFactors = FALSE
)

state_yimby_count <- left_join(state_yimby_count,
                               state_abbr_to_name,
                               by = c("state_abbr" = "state_abb"))


joined_map <- left_join(us_states, state_yimby_count, by = c("region" = "state_name"))

#map plot
library(viridis)
ggplot(joined_map, aes(long, lat, group = group, fill = yimby_count)) +
  geom_polygon(color = "white") +
  scale_fill_viridis(
    option = "C",  # Try "C" (cividis), "D" (inferno), or default "viridis"
    na.value = "grey90",
    direction = -1
  ) +
   labs(
    title = "YIMBY Successes by State",
    subtitle = "States are shaded by the number of CBSAs where housing growth, population growth, and decreasing rent \n burden all occurred over the study period.",
    fill = "Count of YIMBY \n CBSAs")+
  coord_fixed(1.3) +
  theme_void()+
  theme(
  plot.title = element_text(face = "bold", size = 16), #bolding the title
  plot.subtitle = element_text(size = 10))+
    theme(plot.background = element_rect())

```
**Plot 2: Interactive YIMBY Success Scatterplot**
```{r 6.2}
#plot of trends showing whether YIMBY successes cluster or scatter
# Top 15 YIMBY successes (by composite score)
top15_yimby <- yimby_success %>%
  arrange(desc(composite_score)) %>%
  head(15)


p <- ggplot(yimby_success, aes(x = composite_score, y = rent_burden_change, text = NAME)) +
  geom_point(aes(size = pop_growth), color = "steelblue", alpha = 0.7) +
  geom_smooth(method = "lm", se = FALSE, color = "black", linetype = "dashed") +
  labs(
    title = "Success of YIMBY Metros: Housing Growth, Affordability \n Gains, and Population Size (Bubble Size) ",
    subtitle = "Hover to see Metro names and details",
    x = "Composite Housing Growth Score",
    y = "Change in Rent Burden (End - Start)",
    size = "Population Growth"
  ) +
  theme_minimal()+
  theme(
  plot.title = element_text(face = "bold", size = 16), #bolding the title
  plot.subtitle = element_text(size = 10))+
    theme(plot.background = element_rect())

ggplotly(p, tooltip = c("text", "x", "y", "size"))

```
*Findings:* Among 42 metropolitan and micropolitan areas identified as YIMBY successes, regions with above-average housing growth, population gains, and reductions in rent burden, the state-level heat map and interactive scatter plot illustrate that these successes are spread throughout the country, with each metro’s path combining housing growth, affordability, and migration in distinct ways; overall, the data reveal no single dominant relationship among the three metrics, demonstrating that while expanding supply is linked to positive outcomes, local factors drive a variety of approaches to improved affordability and population growth.

### Task 7: Policy Brief ###
```{r 7.1}
#filtering for YIMBY and NIMBY
target_cbsa<-cbsa_summ%>%
  filter(GEOID%in%c("32580","19180"))

#calculating employment growth by cbsa and industry
employment_growth <- WAGES %>%
  group_by(FIPS, INDUSTRY) %>%
  summarise(
    emp_start = first(EMPLOYMENT),
    emp_end = last(EMPLOYMENT),
    emp_growth = emp_end - emp_start,
    emp_growth_pct = (emp_end - emp_start) / emp_start * 100, 
    total_employment = sum(EMPLOYMENT, na.rm = TRUE))%>%
  mutate(cbsa_id = str_remove(FIPS, "^C")) %>%      # Remove "C" 
  mutate(cbsa_id = paste0(cbsa_id, "0"))  #add 0

#joining to get CBSA names
employment_growth$cbsa_id<-as.double(employment_growth$cbsa_id)

#filtering employment data for YIMBY and NIMBY
target_employment<-employment_growth%>%
  filter(cbsa_id%in%c("32580","19180"))

#removing industries that start with 10
target_employment <- target_employment %>%
  filter(!str_starts(as.character(INDUSTRY), "10"))

target_employment <- target_employment %>%
  mutate(industry_sector = str_sub(as.character(INDUSTRY), 1, 2))

#creating a new output since I am grouping the sectors
summary_by_sector <- target_employment %>%
  group_by(FIPS, industry_sector) %>%
  summarise(
    emp_start = sum(emp_start, na.rm = TRUE),
    emp_end = sum(emp_end, na.rm = TRUE),
    emp_growth = sum(emp_growth, na.rm = TRUE),
    emp_growth_pct = (emp_end - emp_start) / emp_start * 100,
    total_employment = sum(total_employment, na.rm = TRUE),
    .groups = "drop"
  )

summary_by_sector$industry_sector<-as.numeric(summary_by_sector$industry_sector)

summary_by_sector <- summary_by_sector %>%
  left_join(
    INDUSTRY_CODES %>%
      select(level1_code, level1_title) %>%
      distinct(),
    by = c("industry_sector" = "level1_code")
  )

#misisng values
summary_by_sector <- summary_by_sector %>%
  mutate(
    level1_title = case_when(
      industry_sector == "31" ~ "Manufacturing",
      industry_sector == "32" ~ "Manufacturing",
      industry_sector == "33" ~ "Manufacturing",
      industry_sector == "44" ~ "Retail Trade",
      industry_sector == "45" ~ "Retail Trade",
      industry_sector == "48" ~ "Transportation and Warehousing",
      industry_sector == "49" ~ "Transportation and Warehousing",
      TRUE ~ level1_title
    )
  )

#redoing calculation after inserting missing industry
summary_by_sector  <- summary_by_sector  %>%
  group_by(FIPS, level1_title) %>%
  summarise(
    emp_start = sum(emp_start, na.rm = TRUE),
    emp_end = sum(emp_end, na.rm = TRUE),
    emp_growth = sum(emp_growth, na.rm = TRUE),
    emp_growth_pct = (emp_end - emp_start) / emp_start * 100,
    total_employment = sum(total_employment, na.rm = TRUE),
    .groups = "drop"
  )

#adding geoid column
summary_by_sector <- summary_by_sector %>%
  rename(industry = level1_title)%>%
  mutate(GEOID = str_remove(FIPS, "^C")) %>%      # Remove "C" 
  mutate(GEOID = paste0(GEOID, "0"))

top_industries <- summary_by_sector %>%
  group_by(GEOID) %>%
  slice_max(order_by = total_employment, n = 5) %>%
  ungroup()

#top industries for IL
top_industries_IL <- top_industries %>%
  filter(GEOID==19180)

top_industries_IL$GEOID<-as.numeric(top_industries_IL$GEOID)

top_industries_IL <- top_industries_IL %>%
  left_join(target_cbsa, by = "GEOID")
```
**From NIMBY to YIMBY: A Collaboration to Unlock Local Growth (Between the Danville, IL Metro Area and the McAllen-Edinburg-Mission, TX Metro Area)**

Housing availability remains a critical challenge across the United States, with some states experiencing more severe shortages than others. In recent years, the “YIMBY” (“Yes In My Backyard”) movement has gained traction as a counter to “NIMBY” (“Not In My Backyard”) opposition, advocating for policies that make it easier to build new homes and address affordability. Success stories from states like Texas, Georgia, and Arkansas show the positive impact of YIMBY reforms on local housing markets. This policy brief takes a closer look at the Danville, IL Metro Area and proposes a partnership with representatives from the McAllen-Edinburg-Mission, TX Metro Area recently recognized for YIMBY progress. Working together, these regions can develop and champion housing policies to help Danville become the next YIMBY success story.

*Challenge*

The Danville, IL Metro Area is facing persistent housing and population challenges that threaten its economic vitality. Over the last decade, rent burden has increased from 18.9% to 21.9% of household income, indicating growing pressure on residents’ affordability. At the same time, the region experienced a significant decline in population, losing over 8,400 residents as housing development stagnated and local economic opportunities dwindled. In contrast, the McAllen–Edinburg–Mission, TX Metro Area, a recent YIMBY success story, achieved a composite score of 7.8, saw its rent burden fall, and added more than 157,000 new residents through robust housing growth and pro-development reforms. The data clearly show that communities embracing YIMBY policies can reverse negative trends in affordability and population, while others risk further decline unless targeted policy action is taken.

*Policy Solution & Sponsorship*

Legislation Proposal:
The proposed Federal Pro-Housing Partnership Act would provide financial incentives and technical assistance to municipalities that adopt YIMBY-friendly zoning reforms, streamline permitting processes, or implement upzoning measures. Participating local governments would be rewarded for increasing new housing supply, reducing rent burden, and expanding housing choice by updating land-use codes, allowing accessory dwelling units, legalizing “missing middle” housing (such as duplexes and triplexes), and removing barriers like excessive parking minimums or lot size requirements. Funding would be allocated based on demonstrated outcomes in new housing development and affordability improvements, ensuring that federal dollars incentivize real results.​

Sponsors:

![](https://www.congress.gov/img/member/66d9fd54f440bf1dc174fbf6_200.jpg)

Primary Sponsor: Representative Monica De La Cruz (R-TX-15) from the McAllen–Edinburg–Mission, TX Metro Area (a recent YIMBY success with strong housing growth and falling rent burden).

![](https://www.congress.gov/img/member/116_rp_il_2_kelly_robin_200.jpg)

Co-Sponsor: Representative Robin Kelly (D-IL-02)from the Danville, IL Metro Area (experiencing rising rent burden and population loss, and primed for pro-housing policy intervention).

These leaders will champion a pragmatic, outcome-based approach to addressing America’s housing crisis, enabling more communities to follow the proven path of YIMBY success.

*Local Economic Impact*

Key Industries in Each CBSA:
To target legislative support and coalition partners, it is essential to understand the leading occupations driving each metro’s economy. Tables 6 and 7 (see below) present the top five industries by total employment for Danville, IL and McAllen–Edinburg–Mission, TX Metro Areas. Notably, sectors such as healthcare, retail, manufacturing, and transportation employ thousands of local residents and form the backbone of community prosperity.

```{r}
#table for IL
datatable(
  top_industries_IL %>%
    select(FIPS, NAME, industry, total_employment),
  colnames = c(
    "CBSA" = "FIPS",
    "Name"="NAME",
    "Industry" = "industry",
    "Total Employment" = "total_employment"
  ),
  caption = "Table 6: Top 5 Industries by Total Employment in Danville, IL Metro Area",
  options = list(
    pageLength = 10,
    autoWidth = TRUE
  ))%>% 
  formatCurrency("Total Employment", currency = "", interval = 3, mark = ",", digits = 0)

#top industries TX
top_industries_TX <- top_industries %>%
  filter(GEOID==32580)

top_industries_TX$GEOID<-as.numeric(top_industries_TX$GEOID)

top_industries_TX <- top_industries_TX %>%
  left_join(target_cbsa, by = "GEOID")

datatable(
  top_industries_TX %>%
    select(FIPS, NAME, industry, total_employment),
  colnames = c(
    "CBSA" = "FIPS",
    "Name"="NAME",
    "Industry" = "industry",
    "Total Employment" = "total_employment"
  ),
  caption = "Table 6: Top 5 Industries by Total Employment in McAllen-Edinburg-Mission, TX Metro Area
",
  options = list(
    pageLength = 10,
    autoWidth = TRUE
  ))%>% 
  formatCurrency("Total Employment", currency = "", interval = 3, mark = ",", digits = 0)
```
High rent burdens in Danville pose direct threats to these vital groups—educators, nurses, retail clerks, and manufacturing workers face greater financial strain, diminished disposable income, and housing insecurity. In Texas, the YIMBY reforms are linked to stabilizing rents and supporting workforce retention in similar sectors.

Union & Industry Partners:

Within these key industries, major unions and trade organizations represent large voter blocs and influential advocacy networks. Partnerships with organizations like the National Education Association (teachers), SEIU and AFSCME (healthcare and government workers), United Food & Commercial Workers (retail), and Teamsters or AFL-CIO affiliates (transportation and logistics) can help drive support for pro-housing policies.

By lowering rent costs and encouraging new construction, this bill benefits union members and industry workers, promoting:
-Higher disposable income for everyday expenses, education, and healthcare.
-Enhanced employee retention and stability for local businesses, schools, and hospitals.
-Creation of new jobs in construction, property management, and related fields.

In short, aligning pro-housing reforms with the interests of local workers and organizations builds both economic momentum and a powerful coalition for legislative action.

*Call to Action*

Passing this bill offers immediate and long-term benefits for both sponsor communities, as it will jump-start growth in Danville, IL and sustain progress in McAllen, Edinburg, Mission, TX. By empowering local governments with proven YIMBY reforms and uniting powerful partners, including unions, industry leaders, and municipal stakeholders, this legislation mobilizes broad support and delivers real economic advantages, housing security, and opportunity for working families. Now is the time to act and bring the proven benefits of abundant affordable housing to communities across the nation.

## Data Sources Used

- ACS via tidycensus R package: [https://www.census.gov/programs-surveys/acs](https://www.census.gov/programs-surveys/acs)
- Building Permits: [https://www.census.gov/construction/bps](https://www.census.gov/construction/bps)
- BLS NAICS Codes: [https://www.bls.gov/cew/classifications/industry/industry-titles.htm](https://www.bls.gov/cew/classifications/industry/industry-titles.htm)
- U.S. Congress Profiles: [https://www.congress.gov/members](https://www.congress.gov/members)

