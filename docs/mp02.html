<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.23">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>mp02 – STA 9750 Submission Material</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-1fe81d0376b2c50856e68e651e390326.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-5311e8573f1ca5d29999c4191e502ac3.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.11.0/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="site_libs/crosstalk-1.2.2/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.2/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="site_libs/datatables-binding-0.34.0/datatables.js"></script>
<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>


</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">STA 9750 Submission Material</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#task-1-data-import" id="toc-task-1-data-import" class="nav-link active" data-scroll-target="#task-1-data-import">Task 1: Data Import</a></li>
  <li><a href="#task-2-data-integration-and-initial-exploration" id="toc-task-2-data-integration-and-initial-exploration" class="nav-link" data-scroll-target="#task-2-data-integration-and-initial-exploration">Task 2: Data Integration and Initial Exploration</a></li>
  <li><a href="#task-3-initial-visualizations" id="toc-task-3-initial-visualizations" class="nav-link" data-scroll-target="#task-3-initial-visualizations">Task 3: Initial Visualizations</a></li>
  <li><a href="#task-4-rent-burden" id="toc-task-4-rent-burden" class="nav-link" data-scroll-target="#task-4-rent-burden">Task 4: Rent Burden</a></li>
  <li><a href="#task-5-housing-growth" id="toc-task-5-housing-growth" class="nav-link" data-scroll-target="#task-5-housing-growth">Task 5: Housing Growth</a></li>
  <li><a href="#task-6-visualization" id="toc-task-6-visualization" class="nav-link" data-scroll-target="#task-6-visualization">Task 6: Visualization</a></li>
  <li><a href="#task-7-policy-brief" id="toc-task-7-policy-brief" class="nav-link" data-scroll-target="#task-7-policy-brief">Task 7: Policy Brief</a></li>
  <li><a href="#data-sources-used" id="toc-data-sources-used" class="nav-link" data-scroll-target="#data-sources-used">Data Sources Used</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">mp02</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="task-1-data-import" class="level3">
<h3 class="anchored" data-anchor-id="task-1-data-import">Task 1: Data Import</h3>
</section>
<section id="task-2-data-integration-and-initial-exploration" class="level3">
<h3 class="anchored" data-anchor-id="task-2-data-integration-and-initial-exploration">Task 2: Data Integration and Initial Exploration</h3>
<p><strong>1. Which CBSA (by name) permitted the largest number of new housing units in the decade from 2010 to 2019 (inclusive)?</strong></p>
<p>The CBSA that permitted the largest number of new housing units is <strong><em>26420</em></strong> which is the <strong><em>Houston-The Woodlands-Sugar Land, TX Metro Area</em></strong> with a total of <strong><em>482,075</em></strong> new housing units.</p>
<p><strong>2. In what year did Albuquerque, NM (CBSA Number 10740) permit the most new housing units?</strong></p>
<p>The year that <strong><em>Albuquerque, NM Metro Area</em></strong> allowed the largest number of housing units in <strong><em>2013</em></strong> with a total of <strong><em>2,606</em></strong> units. <em>Note: the results exclude COVID years (2020-2021) and post COVID years (2022-2023), due to any Pandemic effects.</em></p>
<p><strong>3. Which state (not CBSA) had the highest average individual income in 2015? To answer this question, you will need to first compute the total income per CBSA by multiplying the average household income by the number of households, and then sum total income and total population across all CBSAs in a state. With these numbers, you can answer this question.</strong></p>
<p><img src="https://usflags.design/assets/images/flag-new-hampshire.svg" title="NH Flag" class="img-fluid"></p>
<p>The state that had the highest average individual income in 2015 is <strong><em>New Hampshire</em></strong> (NH) with an average income of <strong><em>$27,378.29</em></strong>.</p>
<p><strong>4. Data scientists and business analysts are recorded under NAICS code 5182. What is the last year in which the NYC CBSA had the most data scientists in the country? In recent, the San Francisco CBSA has had the most data scientists.</strong></p>
<p>The last year in which the NYC CBSA had the most data scientist in the country was in <strong><em>2015</em></strong> with a total of <strong><em>7,417,424</em></strong>.</p>
<p><strong>5. What fraction of total wages in the NYC CBSA was earned by people employed in the finance and insurance industries (NAICS code 52)? In what year did this fraction peak?</strong></p>
<p>The proportion of total wages earned in NYC CBSA by finance and insurance employees is <strong><em>4.09%</em></strong>. The year with the highest proportion of wages earned by finance and insurance employees was in <strong><em>2014</em></strong> at <strong><em>4.60%</em></strong>.</p>
</section>
<section id="task-3-initial-visualizations" class="level3">
<h3 class="anchored" data-anchor-id="task-3-initial-visualizations">Task 3: Initial Visualizations</h3>
<p><strong>1. The relationship between monthly rent and average household income per CBSA in 2009.</strong></p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp02_files/figure-html/Q3.1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>2. The relationship between total employment and total employment in the health care and social services sector (NAICS 62) across different CBSAs.</strong></p>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-dcea5bfc3ce9524a750c" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-dcea5bfc3ce9524a750c">{"x":{"data":[{"orientation":"v","width":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947,0.89999999999999858,0.89999999999999858,0.89999999999999858,0.89999999999999858,0.89999999999999858,0.89999999999999858],"base":[0.78271820944107295,0.78979962159975781,0.79435547719370936,0.77644058728126852,0.78169051189979022,0.79367080158935288,0.79546147404787615,0.79189452231557556,0.79821198091302215,0.79194519698179711,0.79350280559452913,0.80676091087232316,0.80096268051144393,0.79953857359570235],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14],"y":[0.21728179055892705,0.21020037840024219,0.20564452280629064,0.22355941271873148,0.21830948810020978,0.20632919841064712,0.20453852595212385,0.20810547768442444,0.20178801908697785,0.20805480301820289,0.20649719440547087,0.19323908912767684,0.19903731948855607,0.20046142640429765],"text":["Midwest<br />Year: 2009<br />Share: 21.7%","Midwest<br />Year: 2010<br />Share: 21.0%","Midwest<br />Year: 2011<br />Share: 20.6%","Midwest<br />Year: 2012<br />Share: 22.4%","Midwest<br />Year: 2013<br />Share: 21.8%","Midwest<br />Year: 2014<br />Share: 20.6%","Midwest<br />Year: 2015<br />Share: 20.5%","Midwest<br />Year: 2016<br />Share: 20.8%","Midwest<br />Year: 2017<br />Share: 20.2%","Midwest<br />Year: 2018<br />Share: 20.8%","Midwest<br />Year: 2019<br />Share: 20.6%","Midwest<br />Year: 2021<br />Share: 19.3%","Midwest<br />Year: 2022<br />Share: 19.9%","Midwest<br />Year: 2023<br />Share: 20.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(228,26,28,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Midwest","legendgroup":"Midwest","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947,0.89999999999999858,0.89999999999999858,0.89999999999999858,0.89999999999999858,0.89999999999999858,0.89999999999999858],"base":[0.48968487336770017,0.50677745923181328,0.50707171812342056,0.49341083821860188,0.51700078276598804,0.52902623954704608,0.53086431701081471,0.5320074621439399,0.54242568891481979,0.53726996638596691,0.52966824471541885,0.54521696492867477,0.55959639791767168,0.54559961362849341],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14],"y":[0.29303333607337279,0.28302216236794453,0.2872837590702888,0.28302974906266665,0.26468972913380218,0.2646445620423068,0.26459715703706144,0.25988706017163565,0.25578629199820235,0.25467523059583019,0.26383456087911028,0.26154394594364838,0.24136628259377224,0.25393895996720894],"text":["Northeast<br />Year: 2009<br />Share: 29.3%","Northeast<br />Year: 2010<br />Share: 28.3%","Northeast<br />Year: 2011<br />Share: 28.7%","Northeast<br />Year: 2012<br />Share: 28.3%","Northeast<br />Year: 2013<br />Share: 26.5%","Northeast<br />Year: 2014<br />Share: 26.5%","Northeast<br />Year: 2015<br />Share: 26.5%","Northeast<br />Year: 2016<br />Share: 26.0%","Northeast<br />Year: 2017<br />Share: 25.6%","Northeast<br />Year: 2018<br />Share: 25.5%","Northeast<br />Year: 2019<br />Share: 26.4%","Northeast<br />Year: 2021<br />Share: 26.2%","Northeast<br />Year: 2022<br />Share: 24.1%","Northeast<br />Year: 2023<br />Share: 25.4%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(55,126,184,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Northeast","legendgroup":"Northeast","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947,0.89999999999999858,0.89999999999999858,0.89999999999999858,0.89999999999999858,0.89999999999999858,0.89999999999999858],"base":[0.25127891584142026,0.26119638966194708,0.26593767846607053,0.25440042246710315,0.28799729631792181,0.30030443447633792,0.29566463711376012,0.30279134900616822,0.31000228224821802,0.30606727159315533,0.30279919130322019,0.31687601291089934,0.32853876402649368,0.31971201163494667],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14],"y":[0.23840595752627991,0.24558106956986619,0.24113403965735003,0.23901041575149873,0.22900348644806623,0.22872180507070816,0.23519967989705459,0.22921611313777168,0.23242340666660177,0.23120269479281158,0.22686905341219865,0.22834095201777543,0.231057633891178,0.22588760199354674],"text":["Southeast<br />Year: 2009<br />Share: 23.8%","Southeast<br />Year: 2010<br />Share: 24.6%","Southeast<br />Year: 2011<br />Share: 24.1%","Southeast<br />Year: 2012<br />Share: 23.9%","Southeast<br />Year: 2013<br />Share: 22.9%","Southeast<br />Year: 2014<br />Share: 22.9%","Southeast<br />Year: 2015<br />Share: 23.5%","Southeast<br />Year: 2016<br />Share: 22.9%","Southeast<br />Year: 2017<br />Share: 23.2%","Southeast<br />Year: 2018<br />Share: 23.1%","Southeast<br />Year: 2019<br />Share: 22.7%","Southeast<br />Year: 2021<br />Share: 22.8%","Southeast<br />Year: 2022<br />Share: 23.1%","Southeast<br />Year: 2023<br />Share: 22.6%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(77,175,74,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Southeast","legendgroup":"Southeast","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947,0.89999999999999858,0.89999999999999858,0.89999999999999858,0.89999999999999858,0.89999999999999858,0.89999999999999858],"base":[0.15748382239730052,0.1634307578503508,0.15969911147762411,0.16065323410795435,0.19790487090094311,0.20144231189374118,0.2080048426447188,0.20521430990719516,0.21217801900440156,0.20885729727811397,0.21175697487307288,0.21857955921694414,0.22535283488776733,0.21951279461559112],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14],"y":[0.093795093444119737,0.097765631811596282,0.10623856698844641,0.093747188359148803,0.090092425416978705,0.098862122582596745,0.087659794469041319,0.097577039098973056,0.097824263243816462,0.097209974315041359,0.091042216430147316,0.098296453693955205,0.10318592913872635,0.10019921701935555],"text":["Southwest<br />Year: 2009<br />Share: 9.4%","Southwest<br />Year: 2010<br />Share: 9.8%","Southwest<br />Year: 2011<br />Share: 10.6%","Southwest<br />Year: 2012<br />Share: 9.4%","Southwest<br />Year: 2013<br />Share: 9.0%","Southwest<br />Year: 2014<br />Share: 9.9%","Southwest<br />Year: 2015<br />Share: 8.8%","Southwest<br />Year: 2016<br />Share: 9.8%","Southwest<br />Year: 2017<br />Share: 9.8%","Southwest<br />Year: 2018<br />Share: 9.7%","Southwest<br />Year: 2019<br />Share: 9.1%","Southwest<br />Year: 2021<br />Share: 9.8%","Southwest<br />Year: 2022<br />Share: 10.3%","Southwest<br />Year: 2023<br />Share: 10.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(152,78,163,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Southwest","legendgroup":"Southwest","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947,0.89999999999999858,0.89999999999999858,0.89999999999999858,0.89999999999999858,0.89999999999999858,0.89999999999999858],"base":[0,0,0,0,0,0,0,0,0,0,0,0,0,0],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14],"y":[0.15748382239730052,0.1634307578503508,0.15969911147762411,0.16065323410795435,0.19790487090094311,0.20144231189374118,0.2080048426447188,0.20521430990719516,0.21217801900440156,0.20885729727811397,0.21175697487307288,0.21857955921694414,0.22535283488776733,0.21951279461559112],"text":["West<br />Year: 2009<br />Share: 15.7%","West<br />Year: 2010<br />Share: 16.3%","West<br />Year: 2011<br />Share: 16.0%","West<br />Year: 2012<br />Share: 16.1%","West<br />Year: 2013<br />Share: 19.8%","West<br />Year: 2014<br />Share: 20.1%","West<br />Year: 2015<br />Share: 20.8%","West<br />Year: 2016<br />Share: 20.5%","West<br />Year: 2017<br />Share: 21.2%","West<br />Year: 2018<br />Share: 20.9%","West<br />Year: 2019<br />Share: 21.2%","West<br />Year: 2021<br />Share: 21.9%","West<br />Year: 2022<br />Share: 22.5%","West<br />Year: 2023<br />Share: 22.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,127,0,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"West","legendgroup":"West","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":47.481942714819425,"r":7.3059360730593621,"b":40.182648401826498,"l":48.949771689497723},"paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"<b> Regional Share of U.S. Health Sector Employment by Year <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":21.253632212536321},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,14.6],"tickmode":"array","ticktext":["2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2021","2022","2023"],"tickvals":[1,2,3,3.9999999999999996,5,6,7,7.9999999999999991,9,10,11,12,13,14],"categoryorder":"array","categoryarray":["2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2021","2022","2023"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":30,"showline":true,"linecolor":"rgba(127,127,127,1)","linewidth":0.66417600664176002,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Year","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0,1],"tickmode":"array","ticktext":["0%","25%","50%","75%","100%"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0%","25%","50%","75%","100%"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":true,"linecolor":"rgba(127,127,127,1)","linewidth":0.66417600664176002,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Share of National Health Sector Employment","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"Region","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"e95c3a42c60c":{"x":{},"y":{},"fill":{},"text":{},"type":"bar"}},"cur_data":"e95c3a42c60c","visdat":{"e95c3a42c60c":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>The reason I switched to this new visual is because the proportion of health care and social services jobs has stayed pretty steady, usually less than 10% of total employment, across all regions, CBSAs, and years we looked at. There weren’t any big changes in this ratio over time. That’s why I decided to focus more on the regional breakdowns of health sector workers, to visualize the changes over time even if they were minimal.</p>
<p><strong>3. The evolution of average household size over time. Use different lines to represent different CBSAs.</strong></p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp02_files/figure-html/Q3.3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="task-4-rent-burden" class="level3">
<h3 class="anchored" data-anchor-id="task-4-rent-burden">Task 4: Rent Burden</h3>
<p><strong>1.Pick a single Metropolitan Area and see how rent burden has changed over time</strong></p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-4debf3688a51e32db3ba" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-4debf3688a51e32db3ba">{"x":{"filter":"none","vertical":false,"caption":"<caption>Table 1: Baltimore Metro - Rent-to-Income Ratio Over Time<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14"],["Baltimore-Towson, MD Metro Area","Baltimore-Towson, MD Metro Area","Baltimore-Towson, MD Metro Area","Baltimore-Towson, MD Metro Area","Baltimore-Columbia-Towson, MD Metro Area","Baltimore-Columbia-Towson, MD Metro Area","Baltimore-Columbia-Towson, MD Metro Area","Baltimore-Columbia-Towson, MD Metro Area","Baltimore-Columbia-Towson, MD Metro Area","Baltimore-Columbia-Towson, MD Metro Area","Baltimore-Columbia-Towson, MD Metro Area","Baltimore-Columbia-Towson, MD Metro Area","Baltimore-Columbia-Towson, MD Metro Area","Baltimore-Columbia-Towson, MD Metro Area"],[2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2021,2022,2023],[65392,64812,65463,66970,68455,71501,72520,76788,77394,80469,83160,86302,90505,94289],[1048,1048,1073,1089,1132,1166,1184,1226,1241,1265,1316,1390,1461,1557],[0.1923171030095424,0.1940381410849843,0.196691260712158,0.1951321487233089,0.1984369293696589,0.1956895707752339,0.1959183673469388,0.1915924363181747,0.1924180169005349,0.1886440741154979,0.1898989898989899,0.1932747792635165,0.1937130545273742,0.1981567309018019],[false,false,false,false,false,false,false,false,false,false,false,false,false,false],[0.1923171030095424,0.1923171030095424,0.1923171030095424,0.1923171030095424,0.1923171030095424,0.1923171030095424,0.1923171030095424,0.1923171030095424,0.1923171030095424,0.1923171030095424,0.1923171030095424,0.1923171030095424,0.1923171030095424,0.1923171030095424],[0,0.001721038075441828,0.004374157702615566,0.002815045713766506,0.006119826360116459,0.003372467765691473,0.003601264337396326,-0.0007246666913677258,0.0001009138909924823,-0.003673028894044555,-0.002418113110552539,0.0009576762539740546,0.001395951517831728,0.005839627892259475]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Metro Area<\/th>\n      <th>Year<\/th>\n      <th>Income<\/th>\n      <th>Monthly Rent<\/th>\n      <th>Rent-to-Income Ratio<\/th>\n      <th>Rent Burdened (Over 30%)<\/th>\n      <th>Baseline Ratio<\/th>\n      <th>Delta vs Baseline<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"info":false,"columnDefs":[{"targets":3,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \",\", \".\", null);\n  }"},{"targets":4,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \",\", \".\", null);\n  }"},{"targets":5,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 3, 3, \",\", \".\", null);\n  }"},{"targets":7,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 3, 3, \",\", \".\", null);\n  }"},{"targets":8,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 3, 3, \",\", \".\", null);\n  }"},{"className":"dt-right","targets":[2,3,4,5,7,8]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Metro Area","targets":1},{"name":"Year","targets":2},{"name":"Income","targets":3},{"name":"Monthly Rent","targets":4},{"name":"Rent-to-Income Ratio","targets":5},{"name":"Rent Burdened (Over 30%)","targets":6},{"name":"Baseline Ratio","targets":7},{"name":"Delta vs Baseline","targets":8}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":["options.columnDefs.0.render","options.columnDefs.1.render","options.columnDefs.2.render","options.columnDefs.3.render","options.columnDefs.4.render"],"jsHooks":[]}</script>
</div>
</div>
<p>This table reports the Baltimore metro’s rent-to-income ratio each year—a value of 0.30 or above signals a rent-burdened typical household. “Baseline Ratio” is the starting year’s value, and “Delta vs Baseline” captures how this measure has changed since then.</p>
<p>Example (2023): In 2023, Baltimore-Columbia-Towson, MD Metro Area had a rent-to-income ratio of 0.198, meaning the typical household spent about 19.8% of income on rent—well below the 30% threshold for rent burden. The baseline ratio was 0.192, so the ratio increased by only 0.006, or 0.6 percentage points, from the starting year.</p>
<p><strong>2. Highlight the Metro Areas highest and lowest with the highest and lowest rent burden</strong></p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-f9d51319bb5990b6de9c" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-f9d51319bb5990b6de9c">{"x":{"filter":"none","vertical":false,"caption":"<caption>Table 2: Metro Areas with Highest and Lowest Rent-to-Income Ratios (2023)<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10"],["Clearlake, CA Micro Area","Aguadilla, PR Metro Area","Cape Coral-Fort Myers, FL Metro Area","Miami-Fort Lauderdale-West Palm Beach, FL Metro Area","Port St. Lucie, FL Metro Area","Wisconsin Rapids-Marshfield, WI Micro Area","Watertown-Fort Atkinson, WI Micro Area","Bismarck, ND Metro Area","Manitowoc, WI Micro Area","Laconia, NH Micro Area"],[59444,21290,71547,76271,68316,66461,82864,83440,68297,97692],[1544,548,1797,1914,1679,766,953,951,752,1037],[0.3116883116883117,0.3088774072334429,0.3013962849595371,0.3011367361120216,0.2949235903741437,0.1383066760957554,0.1380092681984939,0.1367689357622243,0.1321287904300335,0.1273799287556811],[true,true,true,true,false,false,false,false,false,false],[0.2501080242991129,0.3233853006681515,0.2460697197539303,0.2812867278979672,0.2660546485948123,0.1440724133595944,0.1662597240361138,0.1231254932912391,0.1312593578439528,0.1273799287556811],[0.06158028738919874,-0.01450789343470854,0.0553265652056068,0.01985000821405447,0.02886894177933141,-0.005765737263838971,-0.0282504558376199,0.0136434424709852,0.0008694325860807706,0]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Metro Area<\/th>\n      <th>Income<\/th>\n      <th>Monthly Rent<\/th>\n      <th>Rent-to-Income Ratio<\/th>\n      <th>Rent Burdened (Over 30%)<\/th>\n      <th>Baseline Ratio<\/th>\n      <th>Delta vs Baseline<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"info":false,"columnDefs":[{"targets":4,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 3, 3, \",\", \".\", null);\n  }"},{"targets":6,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 3, 3, \",\", \".\", null);\n  }"},{"targets":7,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 3, 3, \",\", \".\", null);\n  }"},{"targets":2,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \",\", \".\", null);\n  }"},{"targets":3,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatRound(data, 2, 3, \",\", \".\", null);\n  }"},{"className":"dt-right","targets":[2,3,4,6,7]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Metro Area","targets":1},{"name":"Income","targets":2},{"name":"Monthly Rent","targets":3},{"name":"Rent-to-Income Ratio","targets":4},{"name":"Rent Burdened (Over 30%)","targets":5},{"name":"Baseline Ratio","targets":6},{"name":"Delta vs Baseline","targets":7}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":["options.columnDefs.0.render","options.columnDefs.1.render","options.columnDefs.2.render","options.columnDefs.3.render","options.columnDefs.4.render"],"jsHooks":[]}</script>
</div>
</div>
<p>This table spotlights the five metropolitan areas where rent consumes the largest and smallest share of household income in the latest year. “Rent-to-Income Ratio” measures how much annual rent costs take from typical income, a ratio of 0.30 or higher signals rent burden. “Baseline Ratio” gives each metro’s starting value, and “Delta vs Baseline” shows how affordability has shifted over time.</p>
</section>
<section id="task-5-housing-growth" class="level3">
<h3 class="anchored" data-anchor-id="task-5-housing-growth">Task 5: Housing Growth</h3>
<p><strong>1. Instantaneous Metric Table: CBSAs with Highest Instantaneous Housing Growth</strong></p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-baea450ca190ba8ff474" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-baea450ca190ba8ff474">{"x":{"filter":"none","vertical":false,"caption":"<caption>Table 3: CBSAs with Highest Instantaneous Housing Growth (Permits per 1,000 residents)<\/caption>","data":[["1","2","3","4","5"],[41540,34820,39460,18880,35840],["Salisbury, MD Metro Area","Myrtle Beach-Conway-North Myrtle Beach, SC Metro Area","Punta Gorda, FL Metro Area","Crestview-Fort Walton Beach-Destin, FL Metro Area","North Port-Bradenton-Sarasota, FL Metro Area"],[129710,397478,206134,304818,910108],[4894,13176,4429,5596,15928],[37.73032148639273,33.14900447320355,21.48602365451599,18.35849588935037,17.50121963547183],[100,87.84882706112172,56.91473179927948,48.61949035751425,46.34570926197284]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>CBSA<\/th>\n      <th>CBSA Name<\/th>\n      <th>Population<\/th>\n      <th>Housing Units Permitted<\/th>\n      <th>Permits per 1,000 Residents<\/th>\n      <th>Instantaneous Growth<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"info":false,"columnDefs":[{"className":"dt-right","targets":[1,3,4,5,6]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"CBSA","targets":1},{"name":"CBSA Name","targets":2},{"name":"Population","targets":3},{"name":"Housing Units Permitted","targets":4},{"name":"Permits per 1,000 Residents","targets":5},{"name":"Instantaneous Growth","targets":6}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><strong>2. Rate-Based Metric Table: CBSAs with Highest Housing Growth Relative to Population Gain (Permits Issued Compared to 5-Year Population Growth)</strong></p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-d3c7bce4335532c2d6ce" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-d3c7bce4335532c2d6ce">{"x":{"filter":"none","vertical":false,"caption":"<caption>Table 4: CBSAs with Highest Housing Growth Relative to Population Gain<\/caption>","data":[["1","2","3","4","5"],[44220,46520,19140,15260,11260],["Springfield, OH Metro Area","Urban Honolulu, HI Metro Area","Dalton, GA Metro Area","Brunswick-St. Simons, GA Metro Area","Anchorage, AK Metro Area"],[53,758,282,614,426],[215,1851,496,786,457],[4.056603773584905,2.441952506596306,1.75886524822695,1.280130293159609,1.072769953051643],[7.71996681285637,4.645880619513029,3.345371244681679,2.433922100379395,2.039134958656998]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>CBSA<\/th>\n      <th>CBSA Name<\/th>\n      <th>Population Growth (5-Year)<\/th>\n      <th>Housing Units Permitted<\/th>\n      <th>Permits per Resident Added<\/th>\n      <th>Rate-Based Growth (Scaled 0–100)<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"info":false,"columnDefs":[{"className":"dt-right","targets":[1,3,4,5,6]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"CBSA","targets":1},{"name":"CBSA Name","targets":2},{"name":"Population Growth (5-Year)","targets":3},{"name":"Housing Units Permitted","targets":4},{"name":"Permits per Resident Added","targets":5},{"name":"Rate-Based Growth (Scaled 0–100)","targets":6}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><strong>3. Composite Score Table: CBSAs Scoring Highest on Overall Housing Growth (Composite Metric Combining Instantaneous and Rate-Based Measures)</strong></p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-f525d89300dde0782a34" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-f525d89300dde0782a34">{"x":{"filter":"none","vertical":false,"caption":"<caption>Table 5: CBSAs Scoring Highest on Composite Housing Growth Metric<\/caption>","data":[["1","2","3","4","5"],[39460,18880,35840,19300,43300],["Punta Gorda, FL Metro Area","Crestview-Fort Walton Beach-Destin, FL Metro Area","North Port-Bradenton-Sarasota, FL Metro Area","Daphne-Fairhope-Foley, AL Metro Area","Sherman-Denison, TX Metro Area"],[28.63066157475521,24.46725415764393,23.31504624104849,22.88736499948455,22.19910760315199]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>CBSA<\/th>\n      <th>CBSA Name<\/th>\n      <th>Composite Housing Growth Score<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"searching":false,"info":false,"columnDefs":[{"className":"dt-right","targets":[1,3]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"CBSA","targets":1},{"name":"CBSA Name","targets":2},{"name":"Composite Housing Growth Score","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="task-6-visualization" class="level3">
<h3 class="anchored" data-anchor-id="task-6-visualization">Task 6: Visualization</h3>
<p><strong>Plot 1: YIMBY Successes by State</strong></p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp02_files/figure-html/6.1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Plot 2: Interactive YIMBY Success Scatterplot</strong></p>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-add1c90f7c698bd75c56" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-add1c90f7c698bd75c56">{"x":{"data":[{"x":[6.9038420992984983,7.9258318945781383,11.032329853742333,8.4311587066375679,12.285056309319534,6.6187265885381787,6.9060425341423715,6.9305459841337775,7.7777167649410615,10.366492236203692,8.7496279745909238,6.8475845221972271,12.963230103276592,8.118655322755421,7.4635668940116036,7.8011100663338633,10.427386529414765,6.6198340374490243,7.8252753020625834,9.1023522366544274,8.4325674534435606,7.3913620358594825,7.410993146635529,7.7977279382770872,7.5724308828990461,9.9761132681280635,22.902122537149946,18.808092227625508,7.7313387383784393,9.4875732009800444,17.580871212676371,12.405781039162326,10.235402707736172,15.079321066057238,8.1908485559284276,6.2011924648369376,8.5115569512050691,9.7891157118694814,6.5186726408789264,15.678032817086658,8.4064739603494161,6.2186093186617741],"y":[-0.01632079805815817,-0.001186006436073056,-0.025843265840961194,-0.0026323291317554287,-0.0048656556124902495,-0.0015979651035578357,-0.030972085010217559,-0.005676228993623883,-0.0073638301475683066,-0.02242943838394279,-0.0043277006065010337,-0.010101910288317223,-0.00022700821732193899,-0.010707154937291352,-0.029800555704904308,-0.0026867929000875257,-0.0075544785225523936,-0.020332224709065733,-0.024403716228077743,-0.0036911822623601487,-0.001088857435716073,-0.027998019238831801,-0.036927717007777222,-0.021546117504795292,-0.0082768179267512787,-0.015111634058581958,-0.013741166661220189,-0.020687681776893563,-0.011102198872555424,-0.022572967217389966,-0.0034521273254972118,-0.021731265929039012,-0.012557252406427327,-0.0015380470940259128,-0.018218607625310468,-0.0036649503953258833,-0.011236099805813943,-0.0012042046744274726,-0.0052005961082856045,-0.0050402547522206409,-0.033594835070541201,-0.039738310951179051],"text":["composite_score:  6.903842<br />rent_burden_change: -0.0163207981<br />Ames, IA Metro Area<br />pop_growth:  37942","composite_score:  7.925832<br />rent_burden_change: -0.0011860064<br />Athens-Clarke County, GA Metro Area<br />pop_growth:  27648","composite_score: 11.032330<br />rent_burden_change: -0.0258432658<br />Auburn-Opelika, AL Metro Area<br />pop_growth:  66793","composite_score:  8.431159<br />rent_burden_change: -0.0026323291<br />Billings, MT Metro Area<br />pop_growth:  37581","composite_score: 12.285056<br />rent_burden_change: -0.0048656556<br />Burlington, NC Metro Area<br />pop_growth:  28807","composite_score:  6.618727<br />rent_burden_change: -0.0015979651<br />California-Lexington Park, MD Metro Area<br />pop_growth:   5244","composite_score:  6.906043<br />rent_burden_change: -0.0309720850<br />Champaign-Urbana, IL Metro Area<br />pop_growth:  12859","composite_score:  6.930546<br />rent_burden_change: -0.0056762290<br />Charlottesville, VA Metro Area<br />pop_growth:  26715","composite_score:  7.777717<br />rent_burden_change: -0.0073638301<br />Cleveland, TN Metro Area<br />pop_growth:  16419","composite_score: 10.366492<br />rent_burden_change: -0.0224294384<br />College Station-Bryan, TX Metro Area<br />pop_growth:  67338","composite_score:  8.749628<br />rent_burden_change: -0.0043277006<br />Columbia, MO Metro Area<br />pop_growth:  49330","composite_score:  6.847585<br />rent_burden_change: -0.0101019103<br />Eau Claire, WI Metro Area<br />pop_growth:  14855","composite_score: 12.963230<br />rent_burden_change: -0.0002270082<br />Fargo, ND-MN Metro Area<br />pop_growth:  62631","composite_score:  8.118655<br />rent_burden_change: -0.0107071549<br />Gainesville, FL Metro Area<br />pop_growth:  90616","composite_score:  7.463567<br />rent_burden_change: -0.0298005557<br />Gulfport-Biloxi, MS Metro Area<br />pop_growth: 178136","composite_score:  7.801110<br />rent_burden_change: -0.0026867929<br />Hagerstown-Martinsburg, MD-WV Metro Area<br />pop_growth:  40690","composite_score: 10.427387<br />rent_burden_change: -0.0075544785<br />Hammond, LA Micro Area<br />pop_growth:  19376","composite_score:  6.619834<br />rent_burden_change: -0.0203322247<br />Hickory-Lenoir-Morganton, NC Metro Area<br />pop_growth:   4666","composite_score:  7.825275<br />rent_burden_change: -0.0244037162<br />Jacksonville, NC Metro Area<br />pop_growth:  40612","composite_score:  9.102352<br />rent_burden_change: -0.0036911823<br />Jonesboro, AR Metro Area<br />pop_growth:  16251","composite_score:  8.432567<br />rent_burden_change: -0.0010888574<br />Killeen-Temple-Fort Hood, TX Metro Area<br />pop_growth: 122103","composite_score:  7.391362<br />rent_burden_change: -0.0279980192<br />Laredo, TX Metro Area<br />pop_growth:  27710","composite_score:  7.410993<br />rent_burden_change: -0.0369277170<br />Lawrence, KS Metro Area<br />pop_growth:   4170","composite_score:  7.797728<br />rent_burden_change: -0.0215461175<br />McAllen-Edinburg-Mission, TX Metro Area<br />pop_growth: 157319","composite_score:  7.572431<br />rent_burden_change: -0.0082768179<br />Midland, TX Metro Area<br />pop_growth:  50116","composite_score:  9.976113<br />rent_burden_change: -0.0151116341<br />Missoula, MT Metro Area<br />pop_growth:  17121","composite_score: 22.902123<br />rent_burden_change: -0.0137411667<br />Myrtle Beach-North Myrtle Beach-Conway, SC Metro Area<br />pop_growth: 133610","composite_score: 18.808092<br />rent_burden_change: -0.0206876818<br />New Bern, NC Micro Area<br />pop_growth:   3955","composite_score:  7.731339<br />rent_burden_change: -0.0111021989<br />Pensacola-Ferry Pass-Brent, FL Metro Area<br />pop_growth:  74988","composite_score:  9.487573<br />rent_burden_change: -0.0225729672<br />Prescott, AZ Metro Area<br />pop_growth:  16307","composite_score: 17.580871<br />rent_burden_change: -0.0034521273<br />Punta Gorda, FL Metro Area<br />pop_growth:  49182","composite_score: 12.405781<br />rent_burden_change: -0.0217312659<br />Salisbury, MD Metro Area<br />pop_growth:   9529","composite_score: 10.235403<br />rent_burden_change: -0.0125572524<br />Sebastian-Vero Beach, FL Metro Area<br />pop_growth:  34628","composite_score: 15.079321<br />rent_burden_change: -0.0015380471<br />Sioux Falls, SD Metro Area<br />pop_growth:  65000","composite_score:  8.190849<br />rent_burden_change: -0.0182186076<br />Tallahassee, FL Metro Area<br />pop_growth:  33011","composite_score:  6.201192<br />rent_burden_change: -0.0036649504<br />Tuscaloosa, AL Metro Area<br />pop_growth:  61267","composite_score:  8.511557<br />rent_burden_change: -0.0112360998<br />Twin Falls, ID Micro Area<br />pop_growth:  23502","composite_score:  9.789116<br />rent_burden_change: -0.0012042047<br />Valdosta, GA Metro Area<br />pop_growth:  16300","composite_score:  6.518673<br />rent_burden_change: -0.0052005961<br />Waco, TX Metro Area<br />pop_growth:  71992","composite_score: 15.678033<br />rent_burden_change: -0.0050402548<br />Wilmington, NC Metro Area<br />pop_growth: 112812","composite_score:  8.406474<br />rent_burden_change: -0.0335948351<br />Winchester, VA-WV Metro Area<br />pop_growth:  24667","composite_score:  6.218609<br />rent_burden_change: -0.0397383110<br />Yuma, AZ Metro Area<br />pop_growth:  16249"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(70,130,180,1)","opacity":0.69999999999999996,"size":[12.127164393263156,10.749276879284974,15.130114196035311,12.082712958880302,10.917712626185303,5.405202044511987,8.0522010544417437,10.610668719980241,8.8346985612313063,15.179230291998802,13.424821114831953,8.5069061051213382,14.747778572422067,17.109184706084349,22.677165354330711,12.458077222061624,9.4024669141319599,4.9869018703118435,12.448858675878638,8.800514111456005,19.343495162079392,10.75839016444499,4.4434637781047508,21.511981666952227,13.508001842792952,8.9751077983118428,20.083812840531003,3.7795275590551185,15.847580577025754,8.8119347292545545,13.409078201627137,7.1601028525566202,11.709747971802889,14.967005191004624,11.497887795493405,14.619543305113982,10.11016129017221,8.8105085698286807,15.590338259208105,18.719001726657911,10.296083828596093,8.8001057517666297],"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(70,130,180,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"visible":false,"showlegend":false,"xaxis":null,"yaxis":null,"hoverinfo":"text","frame":null}],"layout":{"margin":{"t":47.481942714819425,"r":7.3059360730593621,"b":40.182648401826498,"l":54.794520547945211},"paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"<b> Success of YIMBY Metros: Housing Growth, Affordability <br /> Gains, and Population Size (Bubble Size)  <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":21.253632212536321},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[5.366145961221287,23.737169040765597],"tickmode":"array","ticktext":["10","15","20"],"tickvals":[10,15.000000000000002,20],"categoryorder":"array","categoryarray":["10","15","20"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Composite Housing Growth Score","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.041713876087871908,0.0017485569193709167],"tickmode":"array","ticktext":["-0.04","-0.03","-0.02","-0.01","0.00"],"tickvals":[-0.040000000000000001,-0.029999999999999999,-0.02,-0.010000000000000002,0],"categoryorder":"array","categoryarray":["-0.04","-0.03","-0.02","-0.01","0.00"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Change in Rent Burden (End - Start)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"Population Growth","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"e95c66ef57c4":{"x":{},"y":{},"text":{},"size":{},"type":"scatter"},"e95c6b6b39a7":{"x":{},"y":{},"text":{}}},"cur_data":"e95c66ef57c4","visdat":{"e95c66ef57c4":["function (y) ","x"],"e95c6b6b39a7":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><em>Findings:</em> Among 42 metropolitan and micropolitan areas identified as YIMBY successes, regions with above-average housing growth, population gains, and reductions in rent burden, the state-level heat map and interactive scatter plot illustrate that these successes are spread throughout the country, with each metro’s path combining housing growth, affordability, and migration in distinct ways; overall, the data reveal no single dominant relationship among the three metrics, demonstrating that while expanding supply is linked to positive outcomes, local factors drive a variety of approaches to improved affordability and population growth.</p>
</section>
<section id="task-7-policy-brief" class="level3">
<h3 class="anchored" data-anchor-id="task-7-policy-brief">Task 7: Policy Brief</h3>
<p><strong>From NIMBY to YIMBY: A Collaboration to Unlock Local Growth</strong></p>
<p>Housing availability remains a critical challenge across the United States, with some states experiencing more severe shortages than others. In recent years, the “YIMBY” (“Yes In My Backyard”) movement has gained traction as a counter to “NIMBY” (“Not In My Backyard”) opposition, advocating for policies that make it easier to build new homes and address affordability. Success stories from states like Texas, Georgia, and Arkansas show the positive impact of YIMBY reforms on local housing markets. This policy brief takes a closer look at the Danville, IL Metro Area and proposes a partnership with representatives from the McAllen-Edinburg-Mission, TX Metro Area recently recognized for YIMBY progress. Working together, these regions can develop and champion housing policies to help Danville become the next YIMBY success story.</p>
<p><em>Challenge</em></p>
<p>The Danville, IL Metro Area is facing persistent housing and population challenges that threaten its economic vitality. Over the last decade, rent burden has increased from 18.9% to 21.9% of household income, indicating growing pressure on residents’ affordability. At the same time, the region experienced a significant decline in population, losing over 8,400 residents as housing development stagnated and local economic opportunities dwindled. In contrast, the McAllen–Edinburg–Mission, TX Metro Area, a recent YIMBY success story, achieved a composite score of 7.8, saw its rent burden fall, and added more than 157,000 new residents through robust housing growth and pro-development reforms. The data clearly show that communities embracing YIMBY policies can reverse negative trends in affordability and population, while others risk further decline unless targeted policy action is taken.</p>
<p><em>Policy Solution &amp; Sponsorship</em></p>
<p>Legislation Proposal: The proposed Federal Pro-Housing Partnership Act would provide financial incentives and technical assistance to municipalities that adopt YIMBY-friendly zoning reforms, streamline permitting processes, or implement upzoning measures. Participating local governments would be rewarded for increasing new housing supply, reducing rent burden, and expanding housing choice by updating land-use codes, allowing accessory dwelling units, legalizing “missing middle” housing (such as duplexes and triplexes), and removing barriers like excessive parking minimums or lot size requirements. Funding would be allocated based on demonstrated outcomes in new housing development and affordability improvements, ensuring that federal dollars incentivize real results.​</p>
<p>Sponsors:</p>
<p><img src="https://www.congress.gov/img/member/66d9fd54f440bf1dc174fbf6_200.jpg" class="img-fluid"></p>
<p>Primary Sponsor: Representative Monica De La Cruz (R-TX-15) from the McAllen–Edinburg–Mission, TX Metro Area (a recent YIMBY success with strong housing growth and falling rent burden).</p>
<p><img src="https://www.congress.gov/img/member/116_rp_il_2_kelly_robin_200.jpg" class="img-fluid"></p>
<p>Co-Sponsor: Representative Robin Kelly (D-IL-02)from the Danville, IL Metro Area (experiencing rising rent burden and population loss, and primed for pro-housing policy intervention).</p>
<p>These leaders will champion a pragmatic, outcome-based approach to addressing America’s housing crisis, enabling more communities to follow the proven path of YIMBY success.</p>
<p><em>Local Economic Impact</em></p>
<p>Key Industries in Each CBSA: To target legislative support and coalition partners, it is essential to understand the leading occupations driving each metro’s economy. Tables 6 and 7 (see below) present the top five industries by total employment for Danville, IL and McAllen–Edinburg–Mission, TX Metro Areas. Notably, sectors such as healthcare, retail, manufacturing, and transportation employ thousands of local residents and form the backbone of community prosperity.</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-92e069d464b6d068574e" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-92e069d464b6d068574e">{"x":{"filter":"none","vertical":false,"caption":"<caption>Table 6: Top 5 Industries by Total Employment in Danville, IL Metro Area<\/caption>","data":[["1","2","3","4","5"],["C1918","C1918","C1918","C1918","C1918"],["Danville, IL Metro Area","Danville, IL Metro Area","Danville, IL Metro Area","Danville, IL Metro Area","Danville, IL Metro Area"],["Accommodation and food services","Health care and social assistance","Retail Trade","Wholesale trade","Manufacturing"],[111677,109566,105656,94314,76383]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>CBSA<\/th>\n      <th>Name<\/th>\n      <th>Industry<\/th>\n      <th>Total Employment<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"autoWidth":true,"columnDefs":[{"targets":4,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatCurrency(data, \"\", 0, 3, \",\", \".\", true, null);\n  }"},{"className":"dt-right","targets":4},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"FIPS","targets":1},{"name":"NAME","targets":2},{"name":"industry","targets":3},{"name":"total_employment","targets":4}],"order":[],"orderClasses":false}},"evals":["options.columnDefs.0.render"],"jsHooks":[]}</script>
</div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-541198964c821744b414" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-541198964c821744b414">{"x":{"filter":"none","vertical":false,"caption":"<caption>Table 6: Top 5 Industries by Total Employment in McAllen-Edinburg-Mission, TX Metro Area\n<\/caption>","data":[["1","2","3","4","5"],["C3258","C3258","C3258","C3258","C3258"],["McAllen-Edinburg-Mission, TX Metro Area","McAllen-Edinburg-Mission, TX Metro Area","McAllen-Edinburg-Mission, TX Metro Area","McAllen-Edinburg-Mission, TX Metro Area","McAllen-Edinburg-Mission, TX Metro Area"],["Health care and social assistance","Retail Trade","Accommodation and food services","Administrative and support and waste management and remediation services","Wholesale trade"],[3551636,1450857,1202797,594494,410601]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>CBSA<\/th>\n      <th>Name<\/th>\n      <th>Industry<\/th>\n      <th>Total Employment<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"autoWidth":true,"columnDefs":[{"targets":4,"render":"function(data, type, row, meta) {\n    return type !== 'display' ? data : DTWidget.formatCurrency(data, \"\", 0, 3, \",\", \".\", true, null);\n  }"},{"className":"dt-right","targets":4},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"FIPS","targets":1},{"name":"NAME","targets":2},{"name":"industry","targets":3},{"name":"total_employment","targets":4}],"order":[],"orderClasses":false}},"evals":["options.columnDefs.0.render"],"jsHooks":[]}</script>
</div>
</div>
<p>High rent burdens in Danville pose direct threats to these vital groups—educators, nurses, retail clerks, and manufacturing workers face greater financial strain, diminished disposable income, and housing insecurity. In Texas, the YIMBY reforms are linked to stabilizing rents and supporting workforce retention in similar sectors.</p>
<p>Union &amp; Industry Partners:</p>
<p>Within these key industries, major unions and trade organizations represent large voter blocs and influential advocacy networks. Partnerships with organizations like the National Education Association (teachers), SEIU and AFSCME (healthcare and government workers), United Food &amp; Commercial Workers (retail), and Teamsters or AFL-CIO affiliates (transportation and logistics) can help drive support for pro-housing policies.</p>
<p>By lowering rent costs and encouraging new construction, this bill benefits union members and industry workers, promoting: -Higher disposable income for everyday expenses, education, and healthcare. -Enhanced employee retention and stability for local businesses, schools, and hospitals. -Creation of new jobs in construction, property management, and related fields.</p>
<p>In short, aligning pro-housing reforms with the interests of local workers and organizations builds both economic momentum and a powerful coalition for legislative action.</p>
<p><em>Call to Action</em></p>
<p>Passing this bill offers immediate and long-term benefits for both sponsor communities, as it will jump-start growth in Danville, IL and sustain progress in McAllen, Edinburg, Mission, TX. By empowering local governments with proven YIMBY reforms and uniting powerful partners, including unions, industry leaders, and municipal stakeholders, this legislation mobilizes broad support and delivers real economic advantages, housing security, and opportunity for working families. Now is the time to act and bring the proven benefits of abundant affordable housing to communities across the nation.</p>
</section>
<section id="data-sources-used" class="level2">
<h2 class="anchored" data-anchor-id="data-sources-used">Data Sources Used</h2>
<ul>
<li>ACS via tidycensus R package: <a href="https://www.census.gov/programs-surveys/acs">https://www.census.gov/programs-surveys/acs</a></li>
<li>Building Permits: <a href="https://www.census.gov/construction/bps">https://www.census.gov/construction/bps</a></li>
<li>BLS NAICS Codes: <a href="https://www.bls.gov/cew/classifications/industry/industry-titles.htm">https://www.bls.gov/cew/classifications/industry/industry-titles.htm</a></li>
<li>U.S. Congress Profiles: <a href="https://www.congress.gov/members">https://www.congress.gov/members</a></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/festrada0817\.github\.io\/STA9750-2025-FALL\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>